(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=i(n);fetch(n.href,a)}})();const t={targetGestureLabel:"Waiting...",currentWeights:[0,0,0,0,0],targetWeights:[0,0,0,0,0],spreadTarget:1,currentSpread:1,scatterScaleTarget:1,currentScatterScale:1,fingerCount:0,galaxyEffectActive:!1,voiceModeActive:!1,wasVoiceModeActive:!1,voiceEnabledByUser:!1,handPositionRaw:{x:.5,y:.5},handPositions:[],isHandDetected:!1,musicActivated:!1,heartGestureStart:0,isViewLocked:!1},p={particleCount:4e4,text1:"I",text2:"MISS YOU",text3:"‚ù§Ô∏è",text4:"I MISS YOU",particleSize:.08,scatterRadius:35,textScale:.055,camZ:40,interactionRadius:8,repulsionStrength:8},ge=document.getElementById("canvas-container"),b=new THREE.Scene;b.background=new THREE.Color(328965);b.fog=new THREE.FogExp2(328965,.012);const w=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);w.position.z=p.camZ;const Oe=THREE.MathUtils.degToRad(w.fov),me=2*Math.tan(Oe/2)*w.position.z,Ye=me*w.aspect,B=new THREE.WebGLRenderer({antialias:!0,alpha:!0});B.setSize(window.innerWidth,window.innerHeight);B.setPixelRatio(window.devicePixelRatio);ge&&ge.appendChild(B.domElement);const F=new THREE.OrbitControls(w,B.domElement);F.enableDamping=!0;F.dampingFactor=.05;F.autoRotate=!1;F.enableZoom=!1;window.addEventListener("resize",()=>{w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix(),B.setSize(window.innerWidth,window.innerHeight)});function I(e,s=2,i=null){console.log(`Generating text coords for: "${e}"`);const o=document.createElement("canvas"),n=o.getContext("2d"),a=3e3,r=800;o.width=a,o.height=r,n.fillStyle="black",n.fillRect(0,0,a,r),n.fillStyle="white",n.font="900 250px Arial, sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(e,a/2,r/2);const u=n.getImageData(0,0,a,r).data,d=[],f=i||p.textScale;for(let m=0;m<r;m+=s)for(let h=0;h<a;h+=s){const L=(m*a+h)*4;if(u[L]>128){const A=(h-a/2)*f,g=-(m-r/2)*f;d.push(new THREE.Vector3(A,g,0))}}return console.log(`Generated ${d.length} points for "${e}"`),d}const ke=I(p.text1,3),Xe=I(p.text2,3),Ne=I(p.text3,3),qe=I(p.text4,3);let Ze=I("HELLO",2);const R=new THREE.BufferGeometry,Y=new Float32Array(p.particleCount*3),k=new Float32Array(p.particleCount*3),ye=[],we=[],Ee=[],xe=[],ve=[],re=[];function P(e,s){e.length=0;const i=2,o=.2;for(let n=0;n<p.particleCount;n++){if(s.length===0){e.push(new THREE.Vector3(0,0,0));continue}const a=Math.floor(Math.random()*s.length),r=s[a];e.push(new THREE.Vector3(r.x+(Math.random()-.5)*o,r.y+(Math.random()-.5)*o,r.z+(Math.random()-.5)*i))}}for(let e=0;e<p.particleCount;e++){const s=Math.random()*Math.PI*2,i=Math.acos(Math.random()*2-1),o=Math.cbrt(Math.random())*p.scatterRadius,n=o*Math.sin(i)*Math.cos(s),a=o*Math.sin(i)*Math.sin(s),r=o*Math.cos(i);Y[e*3]=n,Y[e*3+1]=a,Y[e*3+2]=r,k[e*3]=1,k[e*3+1]=1,k[e*3+2]=1,ye.push(new THREE.Vector3(n,a,r))}P(we,ke);P(Ee,Xe);P(xe,Ne);P(ve,qe);P(re,Ze);R.setAttribute("position",new THREE.BufferAttribute(Y,3));R.setAttribute("color",new THREE.BufferAttribute(k,3));const $e=new THREE.PointsMaterial({vertexColors:!0,size:p.particleSize,transparent:!0,opacity:.9,blending:THREE.AdditiveBlending,depthWrite:!1,sizeAttenuation:!0}),v=new THREE.Points(R,$e);function je(e){e.add(v)}function pe(e){const s=Math.max(e.length,3);let i=.09;s>4&&(i=.4/s),i=Math.max(.035,i);const o=I(e,2,i);P(re,o)}const ce=8e3,le=new THREE.BufferGeometry,X=new Float32Array(ce*3),N=new Float32Array(ce*3);for(let e=0;e<ce;e++){const s=20+Math.random()*60,i=Math.random()*Math.PI*2,o=Math.acos(Math.random()*2-1);X[e*3]=s*Math.sin(o)*Math.cos(i),X[e*3+1]=s*Math.sin(o)*Math.sin(i),X[e*3+2]=s*Math.cos(o);const n=new THREE.Color,a=Math.random();a<.3?n.setHex(65535):a<.6?n.setHex(255):a<.8?n.setHex(4915330):n.setHex(16777215),n.multiplyScalar(.5+Math.random()*.5),N[e*3]=n.r,N[e*3+1]=n.g,N[e*3+2]=n.b}le.setAttribute("position",new THREE.BufferAttribute(X,3));le.setAttribute("color",new THREE.BufferAttribute(N,3));const q=new THREE.PointsMaterial({vertexColors:!0,size:.04,transparent:!0,opacity:0,blending:THREE.AdditiveBlending,depthWrite:!1}),se=new THREE.Points(le,q);function Ke(e){e.add(se)}const K=15e3,D=new THREE.BufferGeometry,Z=new Float32Array(K*3),$=new Float32Array(K*3),be=[];function Je(){let e,s,i;for(;;){e=(Math.random()-.5)*3,s=(Math.random()-.5)*3,i=(Math.random()-.5)*3;const o=e*e+9/4*s*s+i*i-1,n=e*e*i*i*i,a=9/80*s*s*i*i*i;if(o*o*o-n-a<0)return new THREE.Vector3(e,s,i)}}for(let e=0;e<K;e++){const s=Je(),i=16,o=s.x*i*1.2,n=s.z*i*1.2,a=s.y*i*.6;Z[e*3]=o,Z[e*3+1]=n,Z[e*3+2]=a,be.push(new THREE.Vector3(o,n,a));const r=new THREE.Color;r.setHSL(.92,1,.75),$[e*3]=r.r,$[e*3+1]=r.g,$[e*3+2]=r.b}D.setAttribute("position",new THREE.BufferAttribute(Z,3));D.setAttribute("color",new THREE.BufferAttribute($,3));const j=new THREE.PointsMaterial({vertexColors:!0,size:.15,transparent:!0,opacity:0,blending:THREE.AdditiveBlending,depthWrite:!1}),C=new THREE.Points(D,j);C.visible=!1;function Qe(e){e.add(C)}function _e(e){const s=e[0],i=[8,12,16,20],o=[5,9,13,17];let n=0,a=0;for(let l=0;l<4;l++)n+=Math.hypot(e[i[l]].x-s.x,e[i[l]].y-s.y),a+=Math.hypot(e[o[l]].x-s.x,e[o[l]].y-s.y);const r=n/a;return Math.max(0,Math.min(1,(r-1)/1.2))}function et(e,s){let i=0;const o=[8,12,16,20],n=[6,10,14,18];for(let u=0;u<4;u++)e[o[u]].y<e[n[u]].y&&i++;const a=e[4],r=e[3];return s==="Right"?a.x<r.x&&i++:a.x>r.x&&i++,i}function Me(e){return e===1?p.text1:e===2?p.text2:e===3?p.text3:e===4?p.text4:""}function Te(e){return e===1?[1,0,0,0,0]:e===2?[0,1,0,0,0]:e===3?[0,0,1,0,0]:e===4?[0,0,0,1,0]:t.targetWeights}function tt(e){if(!e.multiHandLandmarks||e.multiHandLandmarks.length!==2)return!1;const s=e.multiHandLandmarks[0],i=e.multiHandLandmarks[1],o=s[8],n=s[4],a=i[8],r=i[4],l=Math.hypot(o.x-a.x,o.y-a.y),u=Math.hypot(n.x-r.x,n.y-r.y),d=.08;return l<d&&u<d}function nt(e){const s=document.getElementById("loading");s&&(s.style.display="none");let i=0,o=0,n=1;if(t.handPositions=[],e.multiHandLandmarks&&e.multiHandLandmarks.length>0){t.isHandDetected=!0;for(const d of e.multiHandLandmarks){const f=1-d[9].x,m=d[9].y,h=new THREE.Vector3((f-.5)*Ye,-(m-.5)*me,0);t.handPositions.push(h)}const r=e.multiHandLandmarks[0],l=e.multiHandedness[0].label,u=r[0];if(t.handPositionRaw.x=1-u.x,t.handPositionRaw.y=u.y,o=et(r,l),n=_e(r),t.voiceEnabledByUser)t.targetWeights=[0,0,0,0,1],t.spreadTarget=0,t.galaxyEffectActive=!1;else{o===1?i=1:o===2?i=2:o===3?i=3:o===4&&(i=4);const d=tt(e),f=document.getElementById("card-layer");if(d?t.heartGestureStart===0?t.heartGestureStart=Date.now():Date.now()-t.heartGestureStart>2e3&&(t.isViewLocked=!0):t.heartGestureStart=0,t.isViewLocked&&o===0&&(t.isViewLocked=!1),t.isViewLocked)f&&f.classList.add("visible"),t.targetGestureLabel="LOCKED (Fist to Close)",t.spreadTarget=1,t.galaxyEffectActive=!1,t.scatterScaleTarget=1.5;else if(d){f&&f.classList.remove("visible");const m=Math.min((Date.now()-t.heartGestureStart)/2e3,1);t.targetGestureLabel=`Holding Heart... ${Math.floor(m*100)}%`,t.spreadTarget=1,t.galaxyEffectActive=!1,t.scatterScaleTarget=1.5}else if(i>0)f&&f.classList.remove("visible"),t.targetGestureLabel=Me(i),t.spreadTarget=0,t.targetWeights=Te(i),t.galaxyEffectActive=i===4;else{f&&f.classList.remove("visible"),t.targetGestureLabel=o===0?"Fist (Contract)":"Scatter (Expand)",t.spreadTarget=1,t.galaxyEffectActive=!1;const m=.1,h=1.5;t.scatterScaleTarget=m+n*(h-m)}}t.fingerCount=o}else t.isHandDetected=!1,t.voiceEnabledByUser?(t.spreadTarget=0,t.targetWeights=[0,0,0,0,1],t.handPositionRaw.x=.5,t.handPositionRaw.y=.5):(t.spreadTarget=1,t.targetGestureLabel="Waiting...",t.scatterScaleTarget=1,t.handPositionRaw.x=.5,t.handPositionRaw.y=.5),t.fingerCount=0,t.galaxyEffectActive=!1;const a=document.getElementById("bg-music");a&&t.isHandDetected&&!t.musicActivated&&(t.musicActivated=!0,a.play().catch(r=>{console.log("Ph√°t nh·∫°c b·ªã ch·∫∑n:",r),t.musicActivated=!1})),He()}function ot(e){const s=document.getElementById("btn-collapse"),i=document.getElementById("ui-layer");s&&i&&s.addEventListener("click",()=>{i.classList.toggle("collapsed"),s.innerText=i.classList.contains("collapsed")?"+":"‚àí"});const o=document.getElementById("camera-wrapper"),n=document.getElementById("camera-handle");let a=!1,r={x:0,y:0};n&&o&&(n.addEventListener("mousedown",l=>{if(t.voiceModeActive)return;a=!0;const u=o.getBoundingClientRect();r.x=l.clientX-u.left,r.y=l.clientY-u.top,o.style.bottom="auto",o.style.right="auto",o.style.left=u.left+"px",o.style.top=u.top+"px"}),window.addEventListener("mousemove",l=>{a&&(o.style.left=l.clientX-r.x+"px",o.style.top=l.clientY-r.y+"px")}),window.addEventListener("mouseup",()=>{a=!1}))}function He(){const e=document.getElementById("gesture-val"),s=document.getElementById("finger-val");e&&(e.innerText=t.targetGestureLabel),s&&(s.innerText=t.fingerCount)}let he=!1;const S={radius:240,rotateSpeed:-60,imgWidth:120,imgHeight:170};function it(){he||(setTimeout(()=>{const e=document.getElementById("drag-container"),s=document.getElementById("spin-container");if(!e||!s)return;const i=s.querySelectorAll("img, video");s.style.width=S.imgWidth+"px",s.style.height=S.imgHeight+"px";const o=document.getElementById("ground");o&&(o.style.width=S.radius*3+"px",o.style.height=S.radius*3+"px");function n(g){for(let y=0;y<i.length;y++)i[y].style.transform="rotateY("+y*(360/i.length)+"deg) translateZ("+S.radius+"px)",i[y].style.transition="transform 1s",i[y].style.transitionDelay=g}n(1);{const g="spinRevert";s.style.animation=`${g} ${Math.abs(S.rotateSpeed)}s infinite linear`}let a,r,l,u,d=0,f=0,m=0,h=10;function L(g){h>180&&(h=180),h<0&&(h=0),g.style.transform="rotateX("+-h+"deg) rotateY("+m+"deg)"}function A(g){s.style.animationPlayState=g?"running":"paused"}document.onpointerdown=function(g){const y=document.getElementById("card-layer");if(!(!y||!y.classList.contains("visible")))return e.timer&&clearInterval(e.timer),g=g||window.event,a=g.clientX,r=g.clientY,this.onpointermove=function(c){c=c||window.event,l=c.clientX,u=c.clientY,d=l-a,f=u-r,m+=d*.1,h+=f*.1,L(e),a=l,r=u},this.onpointerup=function(c){e.timer=setInterval(function(){d*=.95,f*=.95,m+=d*.1,h+=f*.1,L(e),A(!1),Math.abs(d)<.5&&Math.abs(f)<.5&&(clearInterval(e.timer),A(!0))},17),this.onpointermove=this.onpointerup=null},!1},document.onmousewheel=function(g){const y=document.getElementById("card-layer");if(!y||!y.classList.contains("visible"))return;g=g||window.event;const c=g.wheelDelta/20||-g.detail;S.radius+=c,n(1)}},100),he=!0)}function st(){const e=document.getElementById("btn-voice"),s=document.getElementById("voice-indicator"),i=document.getElementById("voice-btn-text");let o=null;if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const n=window.SpeechRecognition||window.webkitSpeechRecognition;o=new n,o.continuous=!0,o.interimResults=!1,o.lang="en-US",o.onstart=()=>{console.log("Voice recognition started"),s&&s.classList.add("listening"),i&&(i.innerText="Voice Mode: ON"),e&&e.classList.add("active")},o.onerror=a=>{console.error("Voice recognition error",a.error),a.error==="not-allowed"&&(alert("Microphone access denied. Please allow microphone access."),t.voiceEnabledByUser=!1),s&&s.classList.remove("listening")},o.onend=()=>{console.log("Voice recognition ended"),s&&s.classList.remove("listening"),t.voiceEnabledByUser?setTimeout(()=>{try{o.start()}catch(a){console.warn("Restart failed",a)}},300):(i&&(i.innerText="Enable Voice Mode"),e&&e.classList.remove("active"))},o.onresult=a=>{if(!t.voiceEnabledByUser)return;const r=a.results.length-1,d=a.results[r][0].transcript.trim().toUpperCase().split(" ").slice(-3).join(" ");d.length>0&&(pe(d),t.targetGestureLabel="Voice: "+d,t.targetWeights=[0,0,0,0,1],t.spreadTarget=0)}}else i&&(i.innerText="Voice Not Supported"),e&&(e.disabled=!0);e&&e.addEventListener("click",()=>{if(o)if(t.voiceEnabledByUser=!t.voiceEnabledByUser,t.voiceEnabledByUser)try{o.start(),t.voiceModeActive=!0,t.targetGestureLabel="Listening...",t.spreadTarget=0,t.targetWeights=[0,0,0,0,1],pe("HELLO")}catch(n){console.warn(n)}else o.stop(),t.voiceModeActive=!1,t.targetGestureLabel="Voice Mode OFF",t.spreadTarget=1})}je(b);Ke(b);Qe(b);ot();st();it();const ie=document.getElementById("webcam-preview"),M=document.getElementById("loading"),de=new Hands({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${e}`});de.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5});de.onResults(nt);let ae=null;ie&&(ae=new Camera(ie,{onFrame:async()=>{await de.send({image:ie})},width:1280,height:720}));async function at(){try{if(M&&(M.innerHTML="Requesting Camera Access..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API 'navigator.mediaDevices.getUserMedia' not available");(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(s=>s.stop()),M&&(M.innerHTML="Starting MediaPipe Camera..."),ae&&await ae.start()}catch(e){console.error("Camera Error:",e),M&&(M.innerHTML=`Camera not found (${e.name}).<br>Switching to <b>Mouse Interaction Mode</b>.`),setTimeout(()=>{M&&(M.style.display="none"),rt()},2500)}}let Se=!1;function rt(){Se=!0,t.isHandDetected=!0;const e=document.getElementById("camera-wrapper");if(e&&(e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.background="rgba(20, 20, 20, 0.8)",e.style.border="1px solid #444",!document.getElementById("no-cam-msg"))){const n=document.createElement("div");n.id="no-cam-msg",n.innerHTML="NO CAMERA<br>Mouse Mode",n.style.color="#aaa",n.style.textAlign="center",n.style.fontSize="12px",n.style.position="absolute",e.appendChild(n)}const s=document.getElementById("webcam-preview");s&&(s.style.opacity="0.1"),window.addEventListener("mousemove",n=>{const a=new THREE.Vector3,r=new THREE.Vector3;a.set(n.clientX/window.innerWidth*2-1,-(n.clientY/window.innerHeight)*2+1,.5),a.unproject(w),a.sub(w.position).normalize();const l=-w.position.z/a.z;r.copy(w.position).add(a.multiplyScalar(l)),t.handPositions=[r],t.handPositionRaw.x=n.clientX/window.innerWidth,t.handPositionRaw.y=n.clientY/window.innerHeight});let i=0;window.addEventListener("click",()=>{if(t.voiceModeActive)return;i=(i+1)%5;const n=i;n===0?(t.targetGestureLabel="Mouse Click: Scatter",t.spreadTarget=1,t.galaxyEffectActive=!1):(t.targetGestureLabel="Mouse Click: "+Me(n),t.spreadTarget=0,t.targetWeights=Te(n),t.galaxyEffectActive=n===4),He()});const o=document.getElementById("ui-content");if(o){const n=o.querySelector('div[style*="font-size: 11px"]');n&&(n.innerHTML=`
                    <b>Mouse Mode Active:</b><br>
                    üñ±Ô∏è Move mouse to interact<br>
                    üñ±Ô∏è Click to cycle gestures<br>
                    (I -> MISS -> YOU -> ...)<br>
                    <br>
                    <b>Voice Mode:</b><br>
                    üé§ Still works if Mic is available
                `)}}at();function Re(){requestAnimationFrame(Re);const e=document.getElementById("camera-wrapper");t.voiceModeActive!==t.wasVoiceModeActive&&(t.voiceModeActive?(e&&(e.classList.add("fullscreen"),e.style.top="",e.style.left="",e.style.bottom="",e.style.right=""),Se?b.background=new THREE.Color(328965):b.background=null):(e&&(e.classList.remove("fullscreen"),e.style.top||(e.style.bottom="15px",e.style.right="15px")),b.background=new THREE.Color(328965)),t.wasVoiceModeActive=t.voiceModeActive),t.currentSpread+=(t.spreadTarget-t.currentSpread)*.08,t.currentScatterScale+=(t.scatterScaleTarget-t.currentScatterScale)*.1;for(let c=0;c<5;c++)t.currentWeights[c]+=(t.targetWeights[c]-t.currentWeights[c])*.1;const s=(t.handPositionRaw.x-.5)*1.5,i=(t.handPositionRaw.y-.5)*1.5;v.rotation.y+=(s-v.rotation.y)*.1,v.rotation.x+=(i-v.rotation.x)*.1,se.rotation.y+=.002,se.rotation.x+=.001;const o=R.attributes.position.array,n=R.attributes.color.array,a=Date.now()*.001,r=t.currentWeights[0],l=t.currentWeights[1],u=t.currentWeights[2],d=t.currentWeights[3],f=t.currentWeights[4],m=p.interactionRadius*p.interactionRadius;for(let c=0;c<p.particleCount;c++){const T=we[c],E=Ee[c],H=xe[c],J=ve[c],Q=re[c],Le=T.x*r+E.x*l+H.x*u+J.x*d+Q.x*f,Ae=T.y*r+E.y*l+H.y*u+J.y*d+Q.y*f,Ce=T.z*r+E.z*l+H.z*u+J.z*d+Q.z*f,_=ye[c],Be=_.x*t.currentScatterScale,Ie=_.y*t.currentScatterScale,Pe=_.z*t.currentScatterScale,ue=.5*t.currentScatterScale,We=Math.sin(a+c*.1)*ue,ze=Math.cos(a+c*.13)*ue;let W=THREE.MathUtils.lerp(Le,Be+We,t.currentSpread),z=THREE.MathUtils.lerp(Ae,Ie+ze,t.currentSpread),G=THREE.MathUtils.lerp(Ce,Pe,t.currentSpread);if(t.voiceModeActive&&t.handPositions.length>0)for(const U of t.handPositions){const V=W-U.x,te=z-U.y,ne=G-U.z,fe=V*V+te*te+ne*ne;if(fe<m){const O=Math.sqrt(fe),Fe=(p.interactionRadius-O)/p.interactionRadius,oe=Math.pow(Fe,2)*p.repulsionStrength;W+=V/O*oe*5,z+=te/O*oe*5,G+=ne/O*oe*5}}const Ge=o[c*3],Ue=o[c*3+1],Ve=o[c*3+2],ee=.1;o[c*3]+=(W-Ge)*ee,o[c*3+1]+=(z-Ue)*ee,o[c*3+2]+=(G-Ve)*ee;const x=new THREE.Color,De=new THREE.Color(65535);if(t.currentSpread>.8){const U=Math.sqrt(W*W+z*z+G*G),V=Math.min(U/40,1);x.setHSL(.9,.5,.8+V*.2)}else f>.5?(x.copy(De),x.offsetHSL(0,0,.1),Math.random()>.92&&x.setHex(16777215)):(r>.5||l>.5||u>.5||d>.5,x.setHSL(.92,1,.75));n[c*3]=x.r,n[c*3+1]=x.g,n[c*3+2]=x.b}R.attributes.position.needsUpdate=!0,R.attributes.color.needsUpdate=!0,q.opacity=THREE.MathUtils.lerp(q.opacity,t.galaxyEffectActive?.8:0,.03);const h=t.isHandDetected&&t.fingerCount===0&&!t.voiceModeActive,L=h?0:1,A=v.scale.x,g=THREE.MathUtils.lerp(A,L,.08);v.scale.setScalar(g);let y=0;if(h?g<.2&&(y=.9):y=0,j.opacity=THREE.MathUtils.lerp(j.opacity,y,.1),C.visible=j.opacity>.01,C.visible){const c=1+.15*Math.sin(a*6);C.rotation.y=v.rotation.y,C.rotation.x=v.rotation.x;const T=D.attributes.position.array;for(let E=0;E<K;E++){const H=be[E];T[E*3]=H.x*c,T[E*3+1]=H.y*c,T[E*3+2]=H.z*c}D.attributes.position.needsUpdate=!0}h&&(q.opacity*=.9),F.update(),B.render(b,w)}Re();
